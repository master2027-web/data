# Poputi - Сервис поиска попутчиков

## Описание проекта
Poputi - это веб-приложение для поиска попутчиков, построенное на стеке TypeScript, React и Node.js. Проект состоит из frontend и backend частей, использует WebSocket для real-time коммуникации и OpenLayers для отображения карты.

## Структура проекта

```
poputi/
├── frontend/              # Frontend приложение на React + TypeScript
│   ├── src/
│   │   ├── components/   # React компоненты
│   │   │   ├── Map/     # Компоненты карты
│   │   │   └── ...      # Другие компоненты
│   │   ├── services/    # Сервисы приложения
│   │   │   └── websocket/ # WebSocket сервис для real-time коммуникации
│   │   └── ...
│   └── ...
├── backend/              # Backend сервер на Node.js + TypeScript
│   ├── src/
│   │   ├── websocket/   # WebSocket сервис
│   │   └── ...
│   └── ...
└── ...
```

## Основные компоненты

### Frontend

#### Map Component
- Основной компонент для отображения карты с использованием OpenLayers
- Отображает местоположение водителей и пассажиров
- Обрабатывает взаимодействие пользователя с картой

#### WebSocket Service
- Обеспечивает real-time коммуникацию с сервером
- Обрабатывает обновления местоположения пользователей
- Управляет подключением и переподключением к серверу

### Backend

#### WebSocket Service
- Обрабатывает WebSocket подключения
- Управляет состоянием пользователей
- Рассылает обновления местоположения

## Установка и запуск

### Требования
- Node.js 16+
- npm или yarn

### Установка зависимостей

```bash
# Установка зависимостей для всего проекта
npm install

# Установка зависимостей frontend
cd frontend
npm install

# Установка зависимостей backend
cd backend
npm install
```

### Настройка окружения

1. Создайте файл `.env` в директории frontend:
```
VITE_WS_URL=ws://localhost:8080
```

2. Создайте файл `.env` в директории backend:
```
PORT=8080
```

### Запуск приложения

#### Запуск Frontend (режим разработки)
```bash
cd frontend
npm run dev
```

#### Запуск Backend
```bash
cd backend
npm run dev
```

### Сборка для production

#### Frontend
```bash
cd frontend
npm run build
```

#### Backend
```bash
cd backend
npm run build
```

## Разработка

### Frontend
- Использует Vite как сборщик
- TypeScript для типизации
- React для UI компонентов
- OpenLayers для работы с картой

### Backend
- Node.js + TypeScript
- WebSocket для real-time коммуникации

## Дополнительная информация

### Структура WebSocket сообщений
WebSocket сервис использует следующие типы сообщений:
- Обновление местоположения пользователя
- Подключение/отключение пользователя
- Статусы пользователей (водитель/пассажир)

### Маркеры на карте
- Синий маркер - пассажир
- Красный маркер - водитель
- Серый маркер - неопределенный тип пользователя
